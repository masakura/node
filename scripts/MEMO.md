## queue.h
キューのエントリは双方向リンクドリスト。マーカーがあって、それ自身が先端子で終端子。以下のような構造。

```
M <-> a <-> b <-> c <-> M

* M はマーカー
```


### QEUE_EMPTY(q)
* `q` - キューの先頭の終端

次のエントリが自分自身なら空


### QUEUE_HEAD(q)
- `q` - キューの先頭の終端
- `return` - 次のエントリ


### QUEUE_INIT(q)
- `q` - エントリ

自身を最初のエントリとする空のキューを作成する。


### QUEUE_REMOVE(q)
- `q` - エントリ

自身の前後のエントリを結合させ、自身をキューから切り離す


### QUEUE_INSER_TAIL(h, q)
* `h` - キューのマーカー
* `q` - 追加するエントリ

キューの最後にエントリを挿入します。

1. M <-> a <-> b <-> c <-> M
2. q -> M
3. c <- q -> M
4. c -> q
5. q <- M
6. M <-> a <-> b <-> c <-> q <-> M


### QUEUE_MOVE(h, n)
* `h` - 移動元のキュー
* `n` - 新しいキュー

キュー `h` のエントリ全てを新しいキュー `n` に移動します。


### QUEUE_SPLIT(h, q, n)
* `h` - 分割元のキュー
* `q` - 分割の起点と鳴るエントリ
* `n` - 新しいキュー

キュー `h` にあるエントリ `q` 移行を新しいキュー `n` に分割します。

```
Mh <-> a <-> q <-> b <-> Mh
Mn
```

1. b <- Mn
2. b -> Mn
3. Mn -> q
4. a <- Mh
5. a -> Mh
6. Mn <- q

```
Mh <-> a <-> Mh
Mn <-> q <-> b <-> Mn
```


### キューからひとつ取り出す
```c
// キューから先頭のエントリ取り出す
q = QUEUE_HEAD(queue);
// 取り出したエントリの前後を接続させ、キューからエントリを切り離す
QUEUE_REMOVE(q);
// 切り離したエントリ自身の接続を削除する (前後を自分とする)
QUEUE_INIT(q);
```
